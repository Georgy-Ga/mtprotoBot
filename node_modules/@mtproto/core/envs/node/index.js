const makeMTProto = require('@mtproto/core/src');
const SHA1 = require('@mtproto/core/envs/node/sha1');
const SHA256 = require('@mtproto/core/envs/node/sha256');
const PBKDF2 = require('@mtproto/core/envs/node/pbkdf2');
const Transport = require('@mtproto/core/envs/node/transport');
const getRandomBytes = require('@mtproto/core/envs/node/get-random-bytes');
const getLocalStorage = require('@mtproto/core/envs/node/get-local-storage');

function createTransport(dc, crypto) {
  return new Transport(dc, crypto);
}

const MTProto = makeMTProto({
  SHA1,
  SHA256,
  PBKDF2,
  getRandomBytes,
  getLocalStorage,
  createTransport,
});

module.exports = MTProto;
